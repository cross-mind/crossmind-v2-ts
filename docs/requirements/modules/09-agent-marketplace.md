# Agent 雇佣中心 - 需求设计文档

> 📖 **相关文档**：[PRD](../../PRD.md) | [产品功能模块](../02-features.md) | [Agent 执行](./10-agent-execution.md)

**文档版本**: 1.0
**最后更新**: 2024-12-08
**负责人**: 产品团队

---

## 1. 模块概述

### 1.1 模块定位

**核心价值**: Agent 版 Fiverr，提供标准化的 AI 服务，按结果付费，降低 AI 使用门槛。

**目标用户**:
- Solo Entrepreneur：需要 AI 帮助但不懂 prompt engineering
- 小型团队：按需购买 AI 服务

**使用场景**:
- 市场调研：雇佣 Reddit 调研 Agent
- 内容生成：雇佣 PRD 生成 Agent
- 代码开发：雇佣 Landing Page 生成 Agent

### 1.2 模块边界

**包含功能**:
- 服务列表和分类
- 服务详情页
- 下单流程
- 输入表单设计
- 授权管理
- 定价模型

**不包含功能**:
- Agent 执行逻辑（见 [Agent 执行](./10-agent-execution.md)）
- 支付集成（外部 Stripe）

### 1.3 优先级

- **P0**: 服务列表、3个初始服务、下单流程
- **P1**: 更多服务类型、服务评价
- **P2**: 自定义服务、Agent 市场

---

## 2. 核心用户场景

### 场景 2.1: 浏览和选择服务

**用户故事**:
> "作为一个 solo entrepreneur，我想了解产品想法的市场需求，所以我需要市场调研服务"

**基本流程**:
```
用户进入 Agent 雇佣中心
    ↓
浏览服务分类：想法验证、设计、开发、运营
    ↓
点击"想法验证" → 看到 Reddit 调研、Product Hunt 分析
    ↓
点击"Reddit 调研"进入详情页
    ↓
查看服务说明、价格、产出示例
    ↓
决定雇佣
```

### 场景 2.2: 下单和授权

**用户故事**:
> "作为用户，我想雇佣 Reddit 调研 Agent，所以我需要填写输入并授权"

**基本流程**:
```
点击"雇佣此 Agent"
    ↓
填写输入表单：
  - 关键词："SaaS project management"
  - 目标 Subreddit："startups, entrepreneur"
  - 时间范围：最近 6 个月
    ↓
确认所需权限：Reddit API 只读权限
    ↓
授权 Reddit（OAuth 跳转）
    ↓
返回确认订单
    ↓
支付（首次免费）
    ↓
下单成功 → 跳转到任务追踪页
```

---

## 3. 功能详细设计

### 3.1 服务分类

#### 3.1.1 服务阶段分类

| 阶段 | 服务类型 | 示例服务 | 优先级 |
|------|---------|---------|-------|
| 想法验证 | 市场调研 | Reddit 调研、Product Hunt 分析 | P0 |
| 想法验证 | 用户访谈 | 访谈问题生成、记录整理 | P1 |
| 设计阶段 | 需求设计 | PRD 生成、用户故事 | P0 |
| 设计阶段 | 原型设计 | Landing Page 生成 | P0 |
| 开发阶段 | 代码生成 | Next.js 脚手架、API 生成 | P1 |
| 开发阶段 | 技术选型 | 技术栈对比报告 | P1 |
| 运营阶段 | 内容创作 | 博客文章、社交媒体帖子 | P1 |
| 运营阶段 | 数据分析 | GA4 数据解读 | P1 |

#### 3.1.2 MVP 初始服务（1 个）

**MVP 策略**: 先验证核心价值，只提供 1 个最有代表性的服务

**服务: Reddit 调研** 🔍

- **输入字段**：
  - 关键词（必填）：要调研的主题，如 "SaaS project management"
  - 目标 Subreddit（可选）：如 "startups, entrepreneur"，留空则 AI 自动推荐
  - 时间范围：最近 1/3/6/12 个月

- **产出**：
  - 调研报告 (Markdown)，包含：
    - 用户痛点总结
    - 高频讨论话题
    - 竞品提及分析
    - 用户需求洞察
    - 原始帖子引用链接

- **定价**：
  - 基础价格：$29
  - 包含迭代：3 次
  - 超出后：$9/次

- **预计完成时间**: 1-2 小时

- **为什么选择 Reddit 调研作为首个服务**：
  - ✅ 明确的价值：帮助用户快速了解市场需求
  - ✅ 可验证性强：用户容易判断产出质量
  - ✅ 适用广泛：适合想法验证阶段，是核心用户 Sarah 的首要需求
  - ✅ 技术可行：实现难度适中，产出稳定

**V1.0 计划增加的服务**:
- Landing Page 生成（$49，5 次迭代）
- PRD 生成（$39，5 次迭代）
- Product Hunt 竞品分析（$29，3 次迭代）

### 3.2 服务详情页

#### 3.2.1 页面结构

**顶部区域**:
- 服务名称和图标
- 一句话描述
- 价格标签
- "雇佣此 Agent"按钮

**服务说明**:
- 服务能解决什么问题
- 工作步骤概要
- 预计完成时间

**输入要求**:
- 需要用户提供什么信息
- 输入示例

**产出示例**:
- 产出格式（Markdown/代码/图片）
- 实际产出示例截图

**定价信息**:
- 基础价格
- 包含的迭代次数
- 超出后单次价格

**用户评价** (P1):
- 评分
- 评价内容（匿名）

**优先级**: P0

### 3.3 下单流程

#### 3.3.1 输入表单设计

**表单结构**:
```markdown
### Reddit 调研 Agent

**关键词** (必填)
[文本框] 示例：SaaS project management

**目标 Subreddit** (可选)
[标签输入] 示例：startups, entrepreneur, SaaS
说明：留空则自动推荐相关 Subreddit

**时间范围**
[下拉选择] 最近 1 个月 / 3 个月 / 6 个月 / 1 年

**其他要求** (可选)
[多行文本] 其他特殊需求
```

**表单验证**:
- 必填项提示
- 格式验证（如关键词长度）

**优先级**: P0

#### 3.3.2 授权管理

**所需权限列表**:
- Reddit 调研：Reddit API 只读权限
- Landing Page 生成：Vercel 部署权限
- GitHub 相关：GitHub 仓库读写权限

**授权流程**:
```
系统检测所需权限
    ↓
显示权限说明："需要授权 Reddit API 以获取帖子数据"
    ↓
点击"授权 Reddit"
    ↓
OAuth 跳转到 Reddit
    ↓
用户同意授权
    ↓
回调返回 CrossMind
    ↓
显示"授权成功✅"
```

**优先级**: P0

#### 3.3.3 确认订单

**订单摘要**:
- 服务名称
- 输入信息概要
- 价格
- 迭代次数限制
- 预计完成时间

**首次免费体验**:
- 新用户第一次雇佣任意 Agent 免费
- 显示："首次体验免费 🎉"

**支付**:
- 使用 Stripe 支付
- 支持信用卡

**优先级**: P0

### 3.4 定价模型

#### 3.4.1 定价结构

| 服务类型 | 基础价格 | 包含迭代 | 超出价格 |
|---------|---------|---------|---------|
| 简单调研 | $29 | 3 次 | $9/次 |
| 文档生成 | $39 | 5 次 | $15/次 |
| 代码生成 | $49 | 5 次 | $19/次 |
| 复杂任务 | $99 | 7 次 | $29/次 |

**优先级**: P0

---

## 4. 交互流程设计

### 4.1 完整的下单流程

```
[开始] 用户在 Agent 雇佣中心
    ↓
[浏览] 查看服务分类和列表
    ↓
[选择] 点击"Reddit 调研"进入详情页
    ↓
[了解] 查看服务说明、价格、产出示例
    ↓
[决定] 点击"雇佣此 Agent"
    ↓
[填写] 输入表单
  - 关键词："SaaS productivity tools"
  - Subreddit："startups, SaaS"
  - 时间范围："最近 6 个月"
    ↓
[授权] 点击"授权 Reddit" → OAuth 流程 → 授权成功
    ↓
[确认] 查看订单摘要
  - 服务：Reddit 调研
  - 价格：$29（首次免费）
  - 迭代：3 次
    ↓
[支付] 确认订单（首次跳过支付）
    ↓
[成功] 显示"订单创建成功！Agent 即将开始工作"
    ↓
[跳转] 跳转到任务中心的追踪任务
    ↓
[完成] 用户可查看 Agent 工作进度
```

**关键时间节点**:
- 详情页加载: < 1s
- 授权跳转: < 500ms
- 订单创建: < 1s

---

## 5. 业务规则与逻辑

### 5.1 服务提供方

**当前阶段**: 仅 CrossMind Official 提供服务

**未来扩展** (P2): 第三方开发者可发布 Agent 服务

### 5.2 首次免费规则

**适用范围**: 新用户首次雇佣任意 Agent
**限制**: 每个用户仅一次
**标识**: 用户模型中 `first_agent_used: boolean`

### 5.3 定价规则

**迭代计数**:
- 从用户第一次提供反馈开始计数
- 初次产出不计入迭代

**超出计费**:
- 迭代次数用尽后，显示："已用完 3 次迭代，继续需支付 $9/次"
- 用户确认后继续

---

## 6. 状态与数据流

### 6.1 订单状态

```typescript
interface AgentOrder {
  id: string
  serviceId: string
  userId: string
  inputs: Record<string, any>
  price: number
  iterationLimit: number
  iterationCount: number
  status: 'pending' | 'processing' | 'completed' | 'cancelled'
  createdAt: Date
}
```

### 6.2 数据流向

**下单流程**:
```
用户填写 → 前端验证 → 授权确认 → 订单创建 → 支付处理 → Agent 任务创建 → 任务中心显示
```

---

## 7. 边界与异常处理

### 7.1 输入验证

**必填项检查**: 关键字段未填写时阻止下单

**格式验证**: 如关键词长度 1-100 字符

### 7.2 授权失败

**场景**: 用户拒绝授权或授权超时

**处理**: 提示"授权失败，无法继续。请重新授权或选择其他服务"

### 7.3 支付失败

**处理**: 提示"支付失败，请检查支付方式"，提供重试

---

## 8. 验收标准

### 8.1 功能验收

- [ ] 服务列表正常展示
- [ ] 服务详情页完整
- [ ] 下单流程顺畅
- [ ] 首次免费正确触发
- [ ] 授权流程成功

### 8.2 性能指标

| 指标 | 目标值 |
|-----|-------|
| 服务列表加载 | < 1s |
| 详情页加载 | < 1s |
| 下单响应 | < 1s |

---

## 附录

### A. 术语表

| 术语 | 定义 |
|-----|-----|
| Agent 服务 | 标准化的 AI 任务单元 |
| 迭代次数 | 用户可提供反馈的次数 |
| 基础价格 | 服务的起始价格 |

### B. 变更历史

| 版本 | 日期 | 变更内容 | 负责人 |
|-----|------|---------|-------|
| 1.0 | 2024-12-08 | 初始版本 | 产品团队 |
